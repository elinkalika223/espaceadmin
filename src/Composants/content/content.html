<div class="content-container">
  <div class="content-header">
    <h2 class="content-title">Gestion du Contenu Éducatif</h2>
    <button class="btn btn-primary" (click)="openAddContentModal()">
      <i class="fas fa-plus"></i> Ajouter du contenu
    </button>
  </div>

  <!-- Cartes de statistiques -->
  <div class="stats-cards">
    <div class="stat-card">
      <div class="stat-icon" style="background-color: var(--primary-color);">
        <i class="fas fa-file-alt"></i>
      </div>
      <div class="stat-info">
        <h3>{{ getTotalContent() }}</h3>
        <p>Contenus total</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon" style="background-color: var(--secondary-color);">
        <i class="fas fa-eye"></i>
      </div>
      <div class="stat-info">
        <h3>{{ getTotalViews() }}</h3>
        <p>Vues totales</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon" style="background-color: var(--success-color);">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-info">
        <h3>{{ getPublishedContent() }}</h3>
        <p>Contenus publiés</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon" style="background-color: var(--warning-color);">
        <i class="fas fa-play-circle"></i>
      </div>
      <div class="stat-info">
        <h3>{{ getVideosCount() }}</h3>
        <p>Vidéos</p>
      </div>
    </div>
  </div>

  <!-- Onglets -->
  <div class="tabs">
    <div class="tab" 
         [class.active]="activeTab === 'all'" 
         (click)="setActiveTab('all')">
      <i class="fas fa-th"></i> Tous
    </div>
    <div class="tab" 
         [class.active]="activeTab === 'articles'" 
         (click)="setActiveTab('articles')">
      <i class="fas fa-newspaper"></i> Articles
    </div>
    <div class="tab" 
         [class.active]="activeTab === 'videos'" 
         (click)="setActiveTab('videos')">
      <i class="fas fa-video"></i> Vidéos
    </div>
    <div class="tab" 
         [class.active]="activeTab === 'nutrition'" 
         (click)="setActiveTab('nutrition')">
      <i class="fas fa-apple-alt"></i> Nutrition
    </div>
    <div class="tab" 
         [class.active]="activeTab === 'tutorials'" 
         (click)="setActiveTab('tutorials')">
      <i class="fas fa-graduation-cap"></i> Tutoriels
    </div>
  </div>
  
  <!-- Filtres et recherche -->
  <div class="filters">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" 
             [(ngModel)]="searchTerm" 
             (input)="onSearchChange()"
             placeholder="Rechercher du contenu...">
    </div>
    
    <!-- CORRECTION : Balise select bien fermée -->
    <select class="filter-select" 
            [(ngModel)]="selectedCategory" 
            (change)="onFilterChange()">
      <option *ngFor="let category of categories" [value]="category.value">
        {{ category.label }}
      </option>
    </select>
    
    <!-- CORRECTION : Balise select bien fermée -->
    <select class="filter-select" 
            [(ngModel)]="selectedStatus" 
            (change)="onFilterChange()">
      <option *ngFor="let status of statuses" [value]="status.value">
        {{ status.label }}
      </option>
    </select>

    <!-- CORRECTION : Balise select bien fermée -->
    <select class="filter-select" 
            [(ngModel)]="selectedLanguage" 
            (change)="onFilterChange()">
      <option *ngFor="let language of languages" [value]="language.value">
        {{ language.label }}
      </option>
    </select>
  </div>
  
  <!-- Tableau du contenu -->
  <div class="table-container-no-scroll">
    <table class="full-width-table">
      <thead>
        <tr>
          <th>Titre</th>
          <th>Type</th>
          <th>Catégorie</th>
          <th>Auteur</th>
          <th>Langue</th>
          <th>Date</th>
          <th>Vues</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filteredContents">
          <td class="compact-cell">
            <div class="content-title-cell">
              <strong>{{ item.title }}</strong>
              <div class="content-preview" *ngIf="item.type === 'video' && item.duration">
                <i class="fas fa-clock"></i> {{ item.duration }}
              </div>
            </div>
          </td>
          <td class="compact-cell">
            <span [class]="'badge ' + getTypeBadgeClass(item.type)">
              <i [class]="getTypeIcon(item.type)"></i>
              {{ getTypeText(item.type) }}
            </span>
          </td>
          <td class="compact-cell">{{ item.category }}</td>
          <td class="compact-cell">{{ item.author }}</td>
          <td class="compact-cell">
            <span class="language-badge">{{ getLanguageText(item.language) }}</span>
          </td>
          <td class="compact-cell">{{ formatDate(item.publishDate) }}</td>
          <td class="compact-cell">
            <span class="views-count">{{ item.views }}</span>
          </td>
          <td class="compact-cell">
            <span [class]="'badge ' + getStatusBadgeClass(item.status)">
              {{ getStatusText(item.status) }}
            </span>
          </td>
          <td class="compact-cell action-buttons">
            <button class="action-btn btn-primary" 
                    (click)="viewContent(item)"
                    title="Voir">
              <i class="fas fa-eye"></i>
            </button>
            <button class="action-btn btn-warning" 
                    (click)="editContent(item)"
                    title="Modifier">
              <i class="fas fa-edit"></i>
            </button>
            <button class="action-btn btn-success" 
                    *ngIf="item.status !== 'published'"
                    (click)="publishContent(item)"
                    title="Publier">
              <i class="fas fa-check"></i>
            </button>
            <button class="action-btn btn-info" 
                    *ngIf="item.status === 'published'"
                    (click)="archiveContent(item)"
                    title="Archiver">
              <i class="fas fa-archive"></i>
            </button>
            <button class="action-btn btn-danger" 
                    (click)="deleteContent(item)"
                    title="Supprimer">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="filteredContents.length === 0">
          <td colspan="9" class="text-center no-data">
            <i class="fas fa-file-alt fa-2x"></i>
            <p>Aucun contenu trouvé</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pied de tableau -->
  <div class="table-footer" *ngIf="filteredContents.length > 0">
    <div class="table-info">
      Affichage de {{ filteredContents.length }} contenu(s) sur {{ contents.length }}
    </div>
    <div class="content-summary">
      <small>
        Articles: {{ getArticlesCount() }} | 
        Vidéos: {{ getVideosCount() }} | 
        Vues totales: {{ getTotalViews() }}
      </small>
    </div>
  </div>
</div>